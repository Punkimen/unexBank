$(document).ready((function(){$(".burger__icon").on("click",(function(){$(this).toggleClass("active"),$(".header__mobile").slideToggle()}));const e=(e,t)=>{e.on("click",(function(){$(this).addClass(t).siblings().removeClass(t)}))};e($(".header__lang"),"active"),e($(".header__mobile-lang"),"active"),e($(".tabs__name-item"),"active"),$(".questions-item__header").on("click",(function(){$(this).parents(".questions-item").toggleClass("active"),$(this).parents(".questions-item").children(".questions-item__body").slideToggle()}));const t=e=>{let t=$(".online__images").height();e.height(t)};t($(".online__content"));const o=()=>{let e=$(window).width();const t=$(".credit-calc__calculation");e<=992?$(".relative-calc-block").append(t):$(".credit-calc__wrapper").append(t)};o(),$(window).resize((function(){$(window).width();o(),t($(".online__content"))})),$(".accordion__title").on("click",(function(){return $(this).toggleClass("active").next().slideToggle(),!1})),$(".online__content").mCustomScrollbar({axis:"y"}),$(".instruction-content__text--scroll").mCustomScrollbar({axis:"y"}),$(".table-scroll").mCustomScrollbar({axis:"y"})})),$(".modal-close").on("click",(function(){$(this).parent().hide()}));let cabinetTypesPas=$(".typePassport");cabinetTypesPas.on("change",(function(){$(this).is("#radio_passport")?($(".cabinet-new__item--passport").show(),$(".cabinet-new__item--idCard").hide()):($(".cabinet-new__item--passport").hide(),$(".cabinet-new__item--idCard").show())})),$("#addCard").on("click",(function(){$(".choosen-card__new").show()})),$(".add-card__btn").on("click",(function(){$(".cabinet-new__item--newCard").show()})),$(".credit-table__col--creditNum").on("click",(function(){$(this).toggleClass("active"),$(this).parent().next().slideToggle()}));let instance,$range=$("#calculation-range-summ"),$input=$("#calculation-summ"),min=3e3,max=3e4,plus=$(".calculation-item__arrow--top"),minus=$(".calculation-item__arrow--bottom");$("#calculation-range-summ").ionRangeSlider({min:3e3,max:3e4,step:500,onStart:function(e){$input.prop("value",e.from)},onChange:function(e){$input.prop("value",e.from)}}),instance=$range.data("ionRangeSlider"),$input.on("input",(function(){var e=$(this).prop("value");e<min?e=min:e>max&&(e=max),instance.update({from:e})})),plus.on("click",(function(){let e=+$input.val();if(e+=500,e>3e4)return!1;$input.val(e),instance.update({from:e})})),minus.on("click",(function(){let e=+$input.val();if(e-=500,e<3e3)return!1;$input.val(e),instance.update({from:e})})),$("select").on("change",(function(){$(this).css("color","#333")})),$(".file").on("change",(function(){$(this).children(".select-file").css("display","none"),$(this).children(".downloaded-file").css("display","inline-block")}));const timerBlock=document.querySelector(".timer");if(timerBlock){let e=new Date("December 31, 2021 00:00:00").getTime(),t=setInterval((function(){let o=(new Date).getTime(),n=e-o,i=Math.floor(n/864e5),r=Math.floor(n%864e5/36e5),s=Math.floor(n%36e5/6e4),a=Math.floor(n%6e4/1e3);$(".timer").text(i+" д "+r+" ч "+s+" м "+a+" с"),console.log(n),n<=864e5&&n>=36e5?$(".timer").text(r+" ч "+s+" м "+a+" с"):n<=36e5&&n>=0?$(".timer").text(s+" м "+a+" с"):n<0&&(clearInterval(t),$(".timer").text("Время истекло"))}),1e3)}const adressSwitch=$("#adress-switch"),actualAddress=$("#actual-address");adressSwitch.on("change",(function(){!1===adressSwitch.prop("checked")?actualAddress.addClass("show"):actualAddress.removeClass("show")}));let rules={filterInp(e,t,o){["input","keydown","keyup","mousedown","mouseup","select","contextmenu","drop"].forEach((function(o){e.addEventListener(o,(function(){t(this.value)?(this.oldValue=this.value,this.oldSelectionStart=this.selectionStart,this.oldSelectionEnd=this.selectionEnd):this.hasOwnProperty("oldValue")&&(this.value=this.oldValue,this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd))}))}))}};document.querySelector('input[name="phone"]')&&rules.filterInp(document.querySelector('input[name="phone"]'),(function(e){return/^\d*\.?\d*$/.test(e)})),document.querySelector('input[name="series"]')&&rules.filterInp(document.querySelector('input[name="series"]'),(function(e){return/^\d*\.?\d*$/.test(e)})),document.querySelector('input[name="passportNum"]')&&rules.filterInp(document.querySelector('input[name="passportNum"]'),(function(e){return/^\d*\.?\d*$/.test(e)})),document.querySelector('input[name="inn"]')&&rules.filterInp(document.querySelector('input[name="inn"]'),(function(e){return/^\d*\.?\d*$/.test(e)})),document.querySelector('input[name="child"]')&&rules.filterInp(document.querySelector('input[name="child"]'),(function(e){return/^\d*\.?\d*$/.test(e)})),document.querySelector('input[name="workPhone"]')&&rules.filterInp(document.querySelector('input[name="workPhone"]'),(function(e){return/^\d*\.?\d*$/.test(e)}));let typePas=$(".typePassport");typePas.on("change",(function(){$(this).is("#radio_passport")?($(".passport__inner").show(),$(".idCard__inner").hide()):($(".passport__inner").hide(),$(".idCard__inner").show())})),$("#step_1").validate({rules:{fullName:{required:!0,minlength:2},phone:{required:!0},status:{required:!0},dateBornDay:{required:!0},dateBornMounth:{required:!0},dateBornYear:{required:!0},series:{required:!0},passportNum:{required:!0},issued:{required:!0},inn:{required:!0},inn:{required:!0},"date-day":{required:!0},"date-month":{required:!0},"date-year":{required:!0},IDCard:{required:!0},checkbox:{required:!0}}});let formSteps=document.querySelector("#step_1-5");if(formSteps){let e=2;const t=document.querySelector(".step-count"),o=$("#step__btn-next"),n=$("#step__btn-prev"),i=document.querySelectorAll(".reg__step-item");t.innerText=e,steps={nextStep(){if(5!=e)return e++,t.innerText=e,console.log(e),$(".step-progress__item").eq(e-1).addClass("current"),$(".step-progress__item").eq(e-2).addClass("done"),e},prevStep(){if(2!=e)return e--,t.innerText=e,console.log(e),$(".step-progress__item").eq(e).removeClass("current"),$(".step-progress__item").eq(e-1).removeClass("done"),e},renderStep(){i.forEach((function(t){+t.dataset.step==e?t.classList.add("active"):t.classList.remove("active")}))},showBtn(){5===e?($("#step__btn-next").hide(),$("#submitBtn").show()):($("#step__btn-next").show(),$("#submitBtn").hide())}},$("#step_1-5").validate({rules:{status:{required:!0},education:{required:!0},child:{required:!0},name:{required:!0},surname:{required:!0},middleName:{required:!0},phone:{required:!0},statusRelationship:{required:!0},country:{required:!0},region:{required:!0},district:{required:!0},TypeOfRegion:{required:!0},nameregion:{required:!0},typeOfStreet:{required:!0},street:{required:!0},home:{required:!0},appart:{required:!0},term:{required:!0},index:{required:!0},nameWork:{required:!0},industry:{required:!0},numberEmployees:{required:!0},workPhone:{required:!0},employment:{required:!0},positionCat:{required:!0},specialty:{required:!0},workTerm:{required:!0},totalExperience:{required:!0},workRegion:{required:!0},workDistrict:{required:!0},workTypesRegion:{required:!0},workIndex:{required:!0},workNameRegion:{required:!0},workTypesOfStreet:{required:!0},workStreet:{required:!0},workHome:{required:!0},workCorps:{required:!0},workOffice:{required:!0},last:{required:!0},pay:{required:!0},summ:{required:!0},summIncome:{required:!0},"date-day":{required:!0},"date-month":{required:!0},"date-year":{required:!0}}}),o.on("click",e=>{e.preventDefault(),$("#step_1-5").valid()&&(steps.nextStep(),steps.renderStep(),steps.showBtn())}),n.on("click",e=>{e.preventDefault(),steps.prevStep(),steps.renderStep(),steps.showBtn()})}const tabs=$(".photo-do__tab"),tabsBody=$(".photo-do__tab-body");tabs.on("click",(function(){$(this).addClass("active").siblings().removeClass("active");let e=$(this).index();tabsBody.hide(100),tabsBody.eq(e).show(110)}));const instructionsForMan=[{img:"./img/photo-instruction/man_1.svg",text:"Улыбнитесь"},{img:"./img/photo-instruction/man_2.svg",text:"Поверните голову влево"},{img:"./img/photo-instruction/man_3.svg",text:"Покажите кулак"},{img:"./img/photo-instruction/man_4.svg",text:"Покажите ладонь"},{img:"./img/photo-instruction/man_5.svg",text:"Покажите два пальца"},{img:"./img/photo-instruction/man_6.svg",text:"Откройте глаза"},{img:"./img/photo-instruction/man_7.svg",text:"Супер! Идем дальше!"},{img:"./img/photo-instruction/man_8.svg",text:"Упс! Попробуйте еще раз!"}],instructionsForWoman=[{img:"./img/photo-instruction/woman_1.svg",text:"Улыбнитесь"},{img:"./img/photo-instruction/woman_2.svg",text:"Поверните голову влево"},{img:"./img/photo-instruction/woman_3.svg",text:"Покажите кулак"},{img:"./img/photo-instruction/woman_4.svg",text:"Покажите ладонь"},{img:"./img/photo-instruction/woman_5.svg",text:"Покажите два пальца"},{img:"./img/photo-instruction/woman_6.svg",text:"Откройте глаза"},{img:"./img/photo-instruction/woman_7.svg",text:"Супер! Идем дальше!"},{img:"./img/photo-instruction/woman_8.svg",text:"Упс! Попробуйте еще раз!"}],video=document.querySelector("#video");if(video){const e=document.querySelector("#canvas"),t=e.getContext("2d"),o=document.querySelector(".your-photo"),n=document.querySelector("#snap"),i=document.querySelectorAll(".photo-do__btn"),r=document.querySelector(".photo-popup"),s=document.querySelector("#save-snap"),a=document.querySelector(".photo-1"),c=document.querySelector(".photo-2"),u=document.querySelector(".photo-3"),d=document.querySelector(".photo-4"),l=document.querySelector(".photo-5"),p=document.querySelectorAll(".photo-newDo__btn"),m=document.querySelector("#start-verification"),h=document.querySelector(".photo-popup__instruction");i.forEach(e=>{e.addEventListener("click",(function(){r.classList.add("show"),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:!0}).then((function(e){video.srcObject=e,video.play()})):console.log("Камера не подключена!"),console.log(e.getAttribute("data-photo")),1==e.getAttribute("data-photo")?s.setAttribute("data-photo",1):2==e.getAttribute("data-photo")?(s.setAttribute("data-photo",2),console.log("w")):3==e.getAttribute("data-photo")?(s.setAttribute("data-photo",3),console.log("w")):4==e.getAttribute("data-photo")?(s.setAttribute("data-photo",4),console.log("w")):5==e.getAttribute("data-photo")&&(s.setAttribute("data-photo",5),console.log("w"))}))}),n.addEventListener("click",(function(){"do"===n.getAttribute("data-photo")?(t.drawImage(video,0,0,430,263),o.setAttribute("src",e.toDataURL("image/png")),n.setAttribute("data-photo","new"),o.style.display="block",s.classList.add("show")):(n.setAttribute("data-photo","do"),o.style.display="none",s.classList.remove("show"))})),s.addEventListener("click",(function(){1==s.getAttribute("data-photo")?(a.setAttribute("src",e.toDataURL("image/png")),p.forEach(e=>{1==e.getAttribute("data-photo")&&(e.style.display="block")})):2==s.getAttribute("data-photo")?(c.setAttribute("src",e.toDataURL("image/png")),p.forEach(e=>{2==e.getAttribute("data-photo")&&(e.style.display="block")})):3==s.getAttribute("data-photo")?(u.setAttribute("src",e.toDataURL("image/png")),p.forEach(e=>{3==e.getAttribute("data-photo")&&(e.style.display="block")})):4==s.getAttribute("data-photo")?(d.setAttribute("src",e.toDataURL("image/png")),p.forEach(e=>{4==e.getAttribute("data-photo")&&(e.style.display="block")})):5==s.getAttribute("data-photo")&&(l.setAttribute("src",e.toDataURL("image/png")),p.forEach(e=>{5==e.getAttribute("data-photo")&&(e.style.display="block")})),r.classList.remove("show")})),m.addEventListener("click",(function(){var e;e=0,console.log(instructionsForMan[e]),e<instructionsForMan.length&&setInterval((function(){h.innerHTML=`\n                    <img src="${instructionsForMan[e].img}" alt="">\n                    <p>${instructionsForMan[e].text}</p>\n                    `,e++}),1e3)}))}$((function(){$(".popup-modal").magnificPopup({type:"inline",preloader:!1,focus:"#username",closeOnBgClick:!0,enableEscapeKey:!0,closeBtnInside:!1}),$(document).on("click",".popup__exit",(function(e){e.preventDefault(),$.magnificPopup.close()}))}));const form=document.querySelector("#step_1"),form2=document.querySelector("#step_1-5"),formInput=document.querySelectorAll("input"),formSelect=document.querySelectorAll("select");if(form||form2){({objInputs:[],addValue(e){formInput.forEach(e=>{e.addEventListener("change",e=>{let t=e.target.name,o=e.target.value,n=new Date;const i=this.objInputs.find(e=>e.name==t);i?(i.value=o,i.date=n):this.objInputs.push({name:t,value:o,date:n}),console.log(this.objInputs)})}),formSelect.forEach(e=>{e.addEventListener("change",e=>{let t=e.target.name,o=e.target.value,n=new Date;const i=this.objInputs.find(e=>e.name==t);i?(i.value=o,i.date=n):this.objInputs.push({name:t,value:o,date:n})})})}}).addValue()}const canvas=document.querySelector("#signature-paint"),clear=document.querySelector(".contract-signature__clear"),ctx=canvas.getContext("2d");canvas.addEventListener("mousedown",(function(){const e=function(e){let t=e.offsetX,o=e.offsetY;ctx.fillRect(t,o,2,2)};canvas.addEventListener("mousemove",e),canvas.addEventListener("mouseup",(function(){console.log("w"),canvas.removeEventListener("mousemove",e)}))})),clear.addEventListener("click",()=>{ctx.clearRect(0,0,canvas.width,canvas.height)});